<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      th:replace="~{layout :: layout(~{::title}, ~{::main})}">
<head>
    <title>D√©tail D√©l√©gation - Administration</title>
</head>
<body>
<main>
    <h2>üîÑ D√©tail de la D√©l√©gation</h2>
    
    <!-- Messages flash -->
    <div th:if="${success}" class="alert alert-success" th:text="${success}"></div>
    <div th:if="${error}" class="alert alert-error" th:text="${error}"></div>
    
    <div class="card" style="max-width: 700px;">
        <!-- Statut -->
        <div style="margin-bottom: 1.5rem;">
            <span th:if="${delegation.statut == 'ACTIVE'}" 
                  style="background: #27ae60; color: white; padding: 0.5rem 1rem; border-radius: 4px; font-weight: bold;">
                ‚úì D√©l√©gation Active
            </span>
            <span th:if="${delegation.statut == 'ANNULEE'}" 
                  style="background: #e74c3c; color: white; padding: 0.5rem 1rem; border-radius: 4px; font-weight: bold;">
                ‚úó D√©l√©gation Annul√©e
            </span>
            <span th:if="${delegation.statut == 'EXPIREE'}" 
                  style="background: #95a5a6; color: white; padding: 0.5rem 1rem; border-radius: 4px; font-weight: bold;">
                ‚äò D√©l√©gation Expir√©e
            </span>
        </div>
        
        <!-- Informations principales -->
        <div style="display: grid; grid-template-columns: 150px 1fr; gap: 0.75rem; margin-bottom: 1.5rem;">
            <div style="font-weight: bold; color: #7f8c8d;">D√©l√©gant :</div>
            <div>
                <span th:text="${delegation.delegant.prenom + ' ' + delegation.delegant.nom}"></span>
                (<code th:text="${delegation.delegant.login}"></code>)
            </div>
            
            <div style="font-weight: bold; color: #7f8c8d;">D√©l√©gataire :</div>
            <div>
                <span th:text="${delegation.delegataire.prenom + ' ' + delegation.delegataire.nom}"></span>
                (<code th:text="${delegation.delegataire.login}"></code>)
            </div>
            
            <div style="font-weight: bold; color: #7f8c8d;">R√¥le d√©l√©gu√© :</div>
            <div>
                <strong th:text="${delegation.role.libelle}"></strong>
                <span style="color: #7f8c8d;" th:text="'(' + ${delegation.role.code} + ')'"></span>
            </div>
            
            <div style="font-weight: bold; color: #7f8c8d;">Date d√©but :</div>
            <div th:text="${#temporals.format(delegation.dateDebut, 'dd/MM/yyyy HH:mm')}"></div>
            
            <div style="font-weight: bold; color: #7f8c8d;">Date fin :</div>
            <div th:text="${delegation.dateFin != null ? #temporals.format(delegation.dateFin, 'dd/MM/yyyy HH:mm') : 'Non d√©finie (ind√©termin√©e)'}"></div>
        </div>
        
        <!-- Justification -->
        <div style="margin-bottom: 1.5rem;">
            <div style="font-weight: bold; color: #7f8c8d; margin-bottom: 0.5rem;">Justification :</div>
            <div style="background: #f8f9fa; padding: 1rem; border-radius: 4px; border-left: 4px solid #3498db;"
                 th:text="${delegation.justification ?: 'Aucune justification fournie'}"></div>
        </div>
        
        <!-- M√©tadonn√©es -->
        <div style="background: #f8f9fa; padding: 1rem; border-radius: 4px; font-size: 0.9rem; color: #7f8c8d;">
            <div>Cr√©√©e le : <span th:text="${#temporals.format(delegation.createdAt, 'dd/MM/yyyy HH:mm')}"></span></div>
            <div th:if="${delegation.updatedAt}">Modifi√©e le : <span th:text="${#temporals.format(delegation.updatedAt, 'dd/MM/yyyy HH:mm')}"></span></div>
        </div>
    </div>
    
    <!-- Actions -->
    <div style="margin-top: 1.5rem;">
        <form th:if="${delegation.statut == 'ACTIVE'}" 
              th:action="@{/admin/delegations/{id}/annuler(id=${delegation.id})}" 
              method="post" style="display: inline;">
            <button type="submit" class="btn btn-danger"
                    onclick="return confirm('√ätes-vous s√ªr de vouloir annuler cette d√©l√©gation ?')">
                üóë Annuler cette d√©l√©gation
            </button>
        </form>
        <a th:href="@{/admin/delegations}" class="btn btn-secondary">‚Üê Retour √† la liste</a>
    </div>
</main>
</body>
</html>
