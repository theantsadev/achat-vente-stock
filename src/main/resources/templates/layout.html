<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" 
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      th:fragment="layout (title, content)">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title th:replace="${title}">Gestion Achat-Vente-Stock</title>
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Main Stylesheet -->
    <link rel="stylesheet" th:href="@{/css/style.css}">
</head>

<body>
    <header>
        <h1>SystÃ¨me de Gestion Achat-Vente-Stock</h1>
        
        <!-- Informations utilisateur connectÃ© -->
        <div class="user-info" sec:authorize="isAuthenticated()">
            <span class="user-name">
                ConnectÃ© en tant que <strong sec:authentication="name">utilisateur</strong>
            </span>
            <a th:href="@{/logout}" class="btn-logout">
                ğŸšª DÃ©connexion
            </a>
        </div>
    </header>

    <!-- TODO.YML: Navigation pour tous les modules -->
    <nav>
        <ul>
            <li><a href="/">Accueil</a></li>

            <!-- TODO.YML Ligne 1-6: RÃ©fÃ©rentiels -->
            <li>
                <a href="#">RÃ©fÃ©rentiels</a>
                <ul>
                    <li><a href="/articles">Articles</a></li>
                    <li><a href="/fournisseurs">Fournisseurs</a></li>
                    <li><a href="/clients">Clients</a></li>
                    <li><a href="/depots">DÃ©pÃ´ts</a></li>
                </ul>
            </li>

            <!-- TODO.YML Ligne 7-19: Achats -->
            <li>
                <a href="#">Achats</a>
                <ul>
                    <li><a href="/achats/demandes">ğŸ“‹ Demandes d'achat</a></li>
                    <li><a href="/achats/pro-formas">ğŸ“„ Pro-formas</a></li>
                    <li><a href="/achats/bons-commande">ğŸ“„ Bons de commande</a></li>
                    <li><a href="/achats/receptions">ğŸ“¦ RÃ©ceptions</a></li>
                    <li><a href="/achats/factures">ğŸ“‘ Factures fournisseurs</a></li>
                    <li><a href="/achats/paiements">ğŸ’³ Paiements</a></li>
                </ul>
            </li>

            <!-- TODO.YML Ligne 20-30: Ventes -->
            <li>
                <a href="#">Ventes</a>
                <ul>
                    <li><a href="/ventes/devis">Devis</a></li>
                    <li><a href="/ventes/commandes">Commandes Client</a></li>
                    <li><a href="/ventes/livraisons">Livraisons</a></li>
                    <li><a href="/ventes/factures">Factures</a></li>
                </ul>
            </li>

            <!-- TODO.YML Ligne 31-41: Stock -->
            <li>
                <a href="#">Stock</a>
                <ul>
                    <li><a href="/stocks/mouvements">Mouvements</a></li>
                    <li><a href="/stocks/transferts">Transferts</a></li>
                    <li><a href="/stocks/disponible">Stock Disponible</a></li>
                    <li><a href="/stocks/lots">Lots/SÃ©ries</a></li>
                </ul>
            </li>

            <!-- TODO.YML Ligne 42-54: Inventaire -->
            <li>
                <a href="#">Inventaire</a>
                <ul>
                    <li><a href="/inventaires">Inventaires</a></li>
                    <li><a href="/inventaires/ajustements">Ajustements</a></li>
                </ul>
            </li>

            <!-- TODO.YML Ligne 62-67: KPI/Reporting -->
            <li>
                <a href="#">Reporting</a>
                <ul>
                    <li><a href="/reporting/direction">Dashboard Direction</a></li>
                    <li><a href="/reporting/achats">Dashboard Achats</a></li>
                    <li><a href="/reporting/ventes">Dashboard Ventes</a></li>
                    <li><a href="/reporting/stock">Dashboard Stock</a></li>
                </ul>
            </li>

            <!-- TODO.YML Ligne 68-72: Admin (rÃ©servÃ© aux admins) -->
            <li sec:authorize="hasAuthority('ROLE-ADMIN')">
                <a href="#">Administration</a>
                <ul>
                    <li><a href="/admin/utilisateurs">ğŸ‘¤ Utilisateurs</a></li>
                    <li><a href="/admin/roles">ğŸ” RÃ´les & Permissions</a></li>
                    <li><a href="/admin/delegations">ğŸ”„ DÃ©lÃ©gations</a></li>
                    <li><a href="/admin/audit">ğŸ“‹ Journal d'audit</a></li>
                </ul>
            </li>
        </ul>
    </nav>

    <div class="container">
        <!-- Messages flash -->
        <div th:if="${message}" th:class="'alert alert-' + ${typeMessage}">
            <span th:text="${message}"></span>
        </div>

        <!-- Contenu de la page -->
        <div class="content-box">
            <main th:replace="${content}">Contenu de la page</main>
        </div>
    </div>

    <footer>
        <p>&copy; 2026 SystÃ¨me de Gestion Achat-Vente-Stock - Tous droits rÃ©servÃ©s</p>
    </footer>
</body>

</html>